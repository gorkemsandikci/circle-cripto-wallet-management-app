[{"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/index.js":"1","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/reportWebVitals.js":"2","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/App.js":"3","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/data.js":"4","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/components/Credit.js":"5","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/components/Nav.js":"6","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/components/WalletButton.js":"7","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/api/createUser.js":"8","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/api/acquireSessionToken.js":"9","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/api/initializeUser.js":"10","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/api/getAppId.js":"11","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/components/Wallet.js":"12","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/components/WalletItem.js":"13","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/components/WalletItemDetail.js":"14"},{"size":473,"mtime":1722155061177,"results":"15","hashOfConfig":"16"},{"size":343,"mtime":1722155061177,"results":"17","hashOfConfig":"16"},{"size":1600,"mtime":1722769889342,"results":"18","hashOfConfig":"16"},{"size":1973,"mtime":1722155061177,"results":"19","hashOfConfig":"16"},{"size":683,"mtime":1722605856307,"results":"20","hashOfConfig":"16"},{"size":1471,"mtime":1722779288047,"results":"21","hashOfConfig":"16"},{"size":8749,"mtime":1722519936462,"results":"22","hashOfConfig":"16"},{"size":716,"mtime":1722779180706,"results":"23","hashOfConfig":"16"},{"size":1245,"mtime":1722779249755,"results":"24","hashOfConfig":"16"},{"size":624,"mtime":1722779193773,"results":"25","hashOfConfig":"16"},{"size":590,"mtime":1722459674700,"results":"26","hashOfConfig":"16"},{"size":2255,"mtime":1722779288049,"results":"27","hashOfConfig":"16"},{"size":4089,"mtime":1722778817752,"results":"28","hashOfConfig":"16"},{"size":2275,"mtime":1722779647017,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"4ncjte",{"filePath":"33","messages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"35","messages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"37","messages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"39","messages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"41","messages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45","usedDeprecatedRules":"32"},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/index.js",[],["60","61"],"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/reportWebVitals.js",[],"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/App.js",["62","63"],"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/data.js",[],"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/components/Credit.js",[],"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/components/Nav.js",[],"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/components/WalletButton.js",["64","65"],"import React, {useCallback, useEffect, useState} from \"react\";\nimport styled, {keyframes} from \"styled-components\";\nimport {createUser} from \"../api/createUser\";\nimport {acquireSessionToken} from \"../api/acquireSessionToken\";\nimport {initializeUser} from \"../api/initializeUser\";\nimport {getAppId} from \"../api/getAppId\";\nimport {W3SSdk} from \"@circle-fin/w3s-pw-web-sdk\"\n\nconst spin = keyframes`\n    to {\n        transform: rotate(360deg);\n    }\n`;\n\nconst Loader = styled.div`\n    border: 4px solid rgba(0, 0, 0, 0.1);\n    border-left: 4px solid rgb(65, 65, 65);\n    border-radius: 50%;\n    width: 24px;\n    height: 24px;\n    animation: ${spin} 1s linear infinite;\n    margin: 10px auto;\n`;\n\nconst ButtonContainer = styled.div``;\n\nconst StyledButton = styled.button`\n    background: transparent;\n    border: none;\n    cursor: pointer;\n    border: 2px solid rgb(65, 65, 65);\n    padding: 0.5rem;\n    transition: all 0.3s ease;\n\n    &:hover {\n        background: rgb(65, 65, 65);\n        color: white;\n    }\n`;\n\nconst Message = styled.div`\n    margin-top: 1rem;\n    color: ${props => props.error ? 'red' : 'green'};\n    text-align: center;\n`;\n\nconst FormContainer = styled.div`\n    padding: 1rem;\n    background-color: white;\n`;\n\nconst Input = styled.input`\n    width: 100%;\n    padding: 0.5rem;\n    margin-bottom: 0.5rem;\n`;\n\nconst WalletButton = () => {\n    const [isCreating, setIsCreating] = useState(false);\n    const [message, setMessage] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [isInitializing, setIsInitializing] = useState(false);\n    const [sdk, setSdk] = useState(null);\n    const [canVerify, setCanVerify] = useState(false);\n\n    useEffect(() => {\n        setSdk(new W3SSdk());\n\n        const checkLocalStorage = () => {\n            const userId = localStorage.getItem('userId');\n            const userToken = localStorage.getItem('userToken');\n            const encryptionKey = localStorage.getItem('encryptionKey');\n            const challengeId = localStorage.getItem('challengeId');\n            setCanVerify(userToken && encryptionKey && userId && challengeId);\n        };\n\n        checkLocalStorage();\n\n        checkLocalStorage();\n\n        window.addEventListener('storage', checkLocalStorage);\n\n        return () => {\n            window.removeEventListener('storage', checkLocalStorage);\n        };\n    }, []);\n\n    const handleSubmit = useCallback(() => {\n        const appId = localStorage.getItem('appId');\n        const userToken = localStorage.getItem('userToken');\n        const encryptionKey = localStorage.getItem('encryptionKey');\n        const challengeId = localStorage.getItem('challengeId');\n        if (sdk) {\n            sdk.setAppSettings({appId});\n            sdk.setAuthentication({userToken, encryptionKey});\n            sdk.execute(challengeId, (error, result) => {\n                if (error) {\n                    console.log(`${error?.code?.toString() || 'Unknown code'} : ${error?.message ?? 'Error!'}`);\n                    return;\n                }\n                if (result.data) {\n                    console.log(`signature: ${result.date?.signature}`);\n                }\n            });\n        }\n    }, [sdk]);\n\n    const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));\n\n    const checkLocalStorageForInitialization = () => {\n        const userId = localStorage.getItem('userId');\n        const userToken = localStorage.getItem('userToken');\n        const encryptionKey = localStorage.getItem('encryptionKey');\n        const challengeId = localStorage.getItem('challengeId');\n        return userToken && encryptionKey && userId && challengeId;\n    };\n\n    const handleCreateWallet = async () => {\n        setIsCreating(true);\n        setMessage('Checking wallet status...');\n        setLoading(true);\n\n        const userId = localStorage.getItem('userId');\n\n        if (!userId) {\n            setMessage('Creating user...');\n            try {\n                const result = await createUser();\n                if (result) {\n                    console.log('User created successfully. User ID: ', result.userId);\n                    localStorage.setItem('userId', result.userId);\n                    localStorage.setItem('status', result.status);\n\n                    await delay(2000);\n\n                    setMessage('User created. Acquiring session token...');\n\n                    const sessionResult = await acquireSessionToken();\n                    if (sessionResult) {\n                        console.log('Session token acquired successfully.');\n                        setMessage('Session token acquired successfully.');\n\n                        await delay(2000);\n                        const getAppIdResult = await getAppId();\n                        if (getAppIdResult) {\n                            localStorage.setItem('appId', getAppIdResult.appId);\n                            console.log('Retrieved App ID successfully.');\n                            setMessage('APP ID Retrieved successfully.')\n                            setIsInitializing(true);\n                            setCanVerify(true);\n                        } else {\n                            setMessage('Failed to APP ID retrieved!');\n                        }\n                    } else {\n                        setMessage('Failed to acquire session token.');\n                    }\n                } else {\n                    setMessage('Failed to create user.');\n                }\n            } catch (error) {\n                console.error('Error in wallet creation process: ', error);\n                setMessage('An error occurred. Please try again.');\n            }\n        } else if (checkLocalStorageForInitialization()) {\n            setIsInitializing(true);\n        } else {\n            setMessage('Wallet exists. Acquiring session token...');\n            try {\n                const sessionResult = await acquireSessionToken();\n                if (sessionResult) {\n                    console.log('Session token acquired successfully.');\n                    setMessage('Session token acquired successfully.');\n                    setIsInitializing(true);\n                    setCanVerify(true);\n                } else {\n                    setMessage('Failed to acquire session token.');\n                }\n            } catch (error) {\n                console.error('Error acquiring session token: ', error);\n                setMessage('An error occurred while acquiring session token.');\n            }\n        }\n        setLoading(false);\n        setIsCreating(false);\n    };\n\n    const handleInitializeUser = async () => {\n        setIsCreating(true);\n        setMessage('Initializing user...');\n        setLoading(true);\n\n        try {\n            const initializeResult = await initializeUser();\n            if (initializeResult) {\n                setMessage('User initialized successfully.');\n                localStorage.setItem('challengeId', initializeResult.challengeId);\n                setCanVerify(true);\n            } else {\n                setMessage('Failed to initialize user.');\n            }\n        } catch (error) {\n            console.error('Error initializing user: ', error);\n            setMessage('An error occurred while initializing user.');\n        }\n\n        setLoading(false);\n        setIsCreating(false);\n    };\n\n    return (\n        /*<ButtonContainer>\n            <StyledButton\n                onClick={isInitializing ? handleInitializeUser : handleCreateWallet}\n                disabled={isCreating}>\n                {isInitializing ? 'Initialize Now' : (isCreating ? 'Processing...' : 'Create or Acquire Wallet')}\n            </StyledButton>\n            {loading && <Loader/>}\n            {message && <Message>{message}</Message>}\n            {canVerify && <StyledButton onClick={handleSubmit}>Verify Challenge</StyledButton>}\n        </ButtonContainer>\n         */\n        <ButtonContainer>\n            {!isInitializing && !canVerify && (\n                <StyledButton\n                    onClick={handleCreateWallet}\n                    disabled={isCreating}>\n                    {isCreating ? 'Processing...' : 'Create or Acquire Wallet'}\n                </StyledButton>\n            )}\n            {isInitializing && (\n                <StyledButton\n                    onClick={handleInitializeUser}\n                    disabled={isCreating}>\n                    {isCreating ? 'Processing...' : 'Initialize Now'}\n                </StyledButton>\n            )}\n            {loading && <Loader />}\n            {message && <Message>{message}</Message>}\n            {canVerify && <StyledButton onClick={handleSubmit}>Verify Challenge</StyledButton>}\n        </ButtonContainer>\n    );\n};\n\nexport default WalletButton;\n","/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/api/createUser.js",[],"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/api/acquireSessionToken.js",[],"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/api/initializeUser.js",[],"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/api/getAppId.js",[],"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/components/Wallet.js",[],"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/components/WalletItem.js",[],"/Users/gorkemsandikci/dev/www/personal/patika-rise-in/react-music-player/src/components/WalletItemDetail.js",[],{"ruleId":"66","replacedBy":"67"},{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","severity":1,"message":"71","line":1,"column":26,"nodeType":"72","messageId":"73","endLine":1,"endColumn":32},{"ruleId":"70","severity":1,"message":"74","line":22,"column":8,"nodeType":"72","messageId":"73","endLine":22,"endColumn":30},{"ruleId":"70","severity":1,"message":"75","line":47,"column":7,"nodeType":"72","messageId":"73","endLine":47,"endColumn":20},{"ruleId":"70","severity":1,"message":"76","line":52,"column":7,"nodeType":"72","messageId":"73","endLine":52,"endColumn":12},"no-native-reassign",["77"],"no-negated-in-lhs",["78"],"no-unused-vars","'useRef' is defined but never used.","Identifier","unusedVar","'handleSetCurrentWallet' is assigned a value but never used.","'FormContainer' is assigned a value but never used.","'Input' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]